面试官好：我叫陶铎，今年30岁，毕业于湖南铁道职业技术学院，专业是物联网应用技术。
目前已经从事java开发工作7年了，现在主要的工作内容的就是和产品经理一起梳理甲方给的需求，进行初步的可行性评估，评估完成后，对于分配至自己的任务估时，开发完成提测后配合测试，同时也处理生产环境出现的问题。
之前也和售前一起做过项目的poc验证，还有就是之前带领过5人的小团队领导团队开发一年的时间。
现在负责的是太平洋保险下车险的项目，这个项目是太保集团车险维护4s店的一个系统，主要应用于车辆出险后对客户推送4s店的功能，主体业务流程是在太平洋保险投保的车出现事故之后，车主打电话到太保集团的报案系统，然后我们会针对报案系统给定的参数：区域、品牌、车龄等
进行4s店的推荐，推荐用户去某个4s店维修，用户选择了4s店之后，我们会推送消息到4s店，告知4s店车辆出险的情况，并接收后续对车辆进行维修的数据收集，完成整个链路信息收集后，将数据下发至报表作业系统，由他们生成统计的数据，再将数据下发给我们，
我们会对统计的数据进行归纳整理后进行后续的对4s店的评级、增加推荐次数等管理操作。
技术栈是使用的spring springboot hibernate，mybatis-plus,OceanBase，redis
我们这个系统是针对全国车辆出险的，特点是并发量大，数据量大，业务复杂。
并发量大是对外接口调用的频率高，我这边之前做过统计，目前我们系统大概每日外系统的请求量大概在四百万左右。
针对这个并发量，我们这边呢首先是生产环境，我们是有30台（8G4核心）服务器的集群去处理，将机器分割成，对外请求响应集群10台，这个集群处理外部第三方请求，对内后端管理集群12台，这个集群处理对web管理端和移动端的请求，对内后端批处理集群8，处理定时任务。
其次，在外部请求进入nginx的配置进行了负载均衡。并且增加了最大访问速率和控制并发数目前以为我们这边的业务特点，配置是轮询的策略
limit_req_zone key(参数) zone(参数) rate(参数)

```
http {
    # 定义一个限流区域，基于客户端 IP，速率限制为每秒 10 个请求
    limit_req_zone $binary_remote_addr zone=my_limit:10m rate=10r/s;

    server {
        location / {
            # 应用限流规则
            limit_req zone=my_limit;

            # 其他配置
            proxy_pass http://backend;
        }
    }
}
```
key ：定义限流对象，binary_remote_addr 是一种key，表示基于 remote_addr(客户端IP) 来做限流，binary_ 的目的是压缩内存占用量。
zone：定义共享内存区来存储访问信息， myRateLimit:10m 表示一个大小为10M，名字为myRateLimit的内存区域。1M能存储16000 IP地址的访问信息，10M可以存储16W IP地址访问信息。
rate 用于设置最大访问速率，rate=10r/s 表示每秒最多处理10个请求。Nginx 实际上以毫秒为粒度来跟踪请求信息，因此 10r/s 实际上是限制：每100毫秒处理一个请求。
这意味着，自上一个请求处理完后，若后续100毫秒内又有请求到达，将拒绝处理该请求。

第三个是增加了使用redis，把一些正对业务常用的但是修改频率低的通用配置信息放进去，有些需要用分布式锁的场景也有用redis做
第四个呢就是包括数据库查询增加索引提高查询速度，把一些日志和过程中的非业务的保存方法去异步处理，通过把部分非必要写入和整个接口分离开，提高整个接口的效率。

数据量大的也是这个系统的特点，因为我们需要每天针对全国的这些4s店进行监控，上游也有报表系统，每天会针对不同的维度和指标堆这些4s店进行统计，所以我们系统大概每天会对接上游下发的多个百万级别的数据，而且针对这些数据每天要进行处理。
对于数据接收，上游下发文件，我们用的ob loader进行接收，接收速度目前看的话现在还行（之前测试过大概每秒在1.5万左右）
另外就是很多存储过程提供的支持，我们大概有200+个存储过程，其中超5千行的大概有30+个，很多计算类的还是用存储过程实现，不过目前也在考虑后续替换java处理。

业务复杂就是 我们这个系统是2012年立项的，目前现在数据库有大概近一千张表，一个需求改动涉及到的表非常多，同时用到的技术也非常杂乱，目前对这点的话，
我新增了一些统一的功能合并处理，像全局异常处理、封装统一的返回参数、全局安全权限等。并且把旧接口翻新，之前用java6写的代码，换成Java8的stream流的方式，逻辑优化。
技术亮点：
    从0-1落地了第三方接口请求标准，增加了身份认证以及日志记录，并将日志进行存储，提供高效日志查询，在上亿表中，clob字段内进行模糊匹配，后续考虑加入es，目前正在了解es并已经在本地搭建完成
    存储过程梳理和拆分，shell脚本拆分到代码中进行处理
    线上反馈业务给业务员发送消息时效性慢，最慢的时候消息延迟超过3小时，查看代码发现代码是只有一台服务器在跑，每分钟读取一次，每次读取50条数据，增加多线程多服务器数据处理，微信聊天吞吐量和延迟的记录，
项目的情况差不多说完了。面试官您还有什么想问的吗？

